language: python
sudo: required
dist: xenial
python:
  - "3.6"
#  - "3.7"
#  - "nightly"
before_install:
  - "sudo apt-get update"
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start
install:
  - pip install -r requirements.txt
  - pip install coverage codacy-coverage
script:
 - isort -c -rc
 - pycodestyle lotto/ tests/ *.py*
 - nosetests --with-coverage --cover-erase --cover-package=lotto --cover-html
after_success:
  - coverage report -m
  - coverage xml
  - export CODACY_PROJECT_TOKEN=67f541353e0644c49eceb0c3033a2a50
  - python-codacy-coverage -r coverage.xml
